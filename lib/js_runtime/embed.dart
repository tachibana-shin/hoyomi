const jsRuntimePolyfill = r'''// @bun
(()=>{function n(t){Object.assign(globalThis,t)}n({btoa:p,atob:y});function p(t){let r=Uint8Array.from(t,(e)=>e.charCodeAt(0)),s="";for(let e=0;e<r.length;e++)s+=String.fromCharCode(r[e]);return S(s)}function y(t){return R(t)}function S(t){let s="",e=0;while(e<t.length){let o=t.charCodeAt(e++)&255,i=t.charCodeAt(e++),a=t.charCodeAt(e++),c=o>>2,f=(o&3)<<4|i>>4,d=isNaN(i)?64:(i&15)<<2|a>>6,x=isNaN(a)?64:a&63;s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(x)}return s}function R(t){let s="",e=0;t=t.replace(/[^A-Za-z0-9+/=]/g,"");while(e<t.length){let o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(e++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(e++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(e++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(e++)),f=o<<2|i>>4,d=(i&15)<<4|a>>2,x=(a&3)<<6|c;if(s+=String.fromCharCode(f),a!=64)s+=String.fromCharCode(d);if(c!=64)s+=String.fromCharCode(x)}return s}n({base64Encode:U,base64Decode:k});function U(t){let r=String.fromCharCode(...t);return p(r)}function k(t){let r=y(t),s=new Uint8Array(r.length);for(let e=0;e<r.length;e++)s[e]=r.charCodeAt(e);return s}var u=new Map;function C(t,r){let s=u.get(t);if(!s)s=new Set,u.set(t,s);s.add(r)}function _(t,r){u.get(t)?.delete(r)}function I(t,r){u.get(t)?.forEach((s)=>{try{s(r)}catch(e){console.error("Error in message listener for event:",t,e)}})}n({addEventListener:C,removeEventListener:_,__$$DART_SEND_MESSAGE$$__:I});class g{map;constructor(t={}){if(this.map={},t instanceof g){t.forEach((r,s)=>{this.map[s.toLowerCase()]=r});return}else for(let r in t)this.map[r.toLowerCase()]=t[r]}get(t){return this.map[t.toLowerCase()]??null}has(t){return t.toLowerCase()in this.map}keys(){return Object.keys(this.map)}entries(){return Object.entries(this.map)}forEach(t){for(let[r,s]of this.entries())t(s,r,this)}}n({Headers:g});class m{url;method;headers;body;constructor(t,r={}){this.url=typeof t==="string"?t:t instanceof URL?t.toString():t.url,this.method=(r.method||(typeof t.method==="string"?t.method:"GET")).toUpperCase(),this.headers=new g(r.headers||(typeof t!=="string"&&!(t instanceof URL)?t.headers:{})),this.body=r.body??(typeof t!=="string"&&!(t instanceof URL)?t.body:null)}clone(){return new m(this.url,{method:this.method,headers:this.headers,body:this.body})}}n({Request:m});class l{#t;status;statusText;headers;url;ok;constructor(t,r={}){this.#t=t,this.status=r.status??200,this.statusText=r.statusText??"",this.headers=new g(r.headers||{}),this.url=r.url??"",this.ok=this.status>=200&&this.status<300}async text(){return atob(this.#t)}async json(){return JSON.parse(await this.text())}async arrayBuffer(){let t=atob(this.#t),r=t.length,s=new Uint8Array(r);for(let e=0;e<r;e++)s[e]=t.charCodeAt(e);return s.buffer}}n({Response:l});async function A(t,r){let s=t instanceof m?t:new m(t,r),e="fetch_"+Math.random().toString(36).slice(2),o="response:"+e;return new Promise((i,a)=>{let c=(f)=>{if(_(o,c),f.__fetch_error__)a(new Error(f?.__fetch_error__));else{let d=new l(f.__body,{status:f.status,statusText:f.statusText,headers:f.headers,url:f.url});i(d)}};C(o,c),sendMessage("dart_fetch_request",JSON.stringify({id:e,url:s.url,options:{method:s.method,headers:Object.fromEntries(s.headers.entries()),body:s.body}}))})}n({fetch:A});class w{constructor(t="utf-8"){if(t.toLowerCase()!=="utf-8")throw new Error("Only utf-8 TextDecoder is supported")}decode(t){if(!(t instanceof Uint8Array))t=new Uint8Array(t);let r="",s=0;while(s<t.length){let e=t[s++];if(e<128)r+=String.fromCharCode(e);else if(e>=192&&e<224){let o=t[s++];r+=String.fromCharCode((e&31)<<6|o&63)}else if(e>=224&&e<240){let o=t[s++],i=t[s++];r+=String.fromCharCode((e&15)<<12|(o&63)<<6|i&63)}else if(e>=240){let o=t[s++],i=t[s++],a=t[s++],c=(e&7)<<18|(o&63)<<12|(i&63)<<6|a&63;c-=65536,r+=String.fromCharCode(55296+(c>>10),56320+(c&1023))}}return r}}n({TextDecoder:w});class E{encode(t){let r=[];for(let s=0;s<t.length;s++){let e=t.charCodeAt(s);if(e<128)r.push(e);else if(e<2048)r.push(192|e>>6),r.push(128|e&63);else if(e<55296||e>=57344)r.push(224|e>>12),r.push(128|e>>6&63),r.push(128|e&63);else{if(s++,s>=t.length)throw new Error("Invalid surrogate pair");let o=t.charCodeAt(s),i=(e-55296<<10)+(o-56320)+65536;r.push(240|i>>18),r.push(128|i>>12&63),r.push(128|i>>6&63),r.push(128|i&63)}}return new Uint8Array(r)}}n({TextEncoder:E});class b extends Error{name="UnimplementedError"}n({UnimplementedError:b});class v{params=new Map;constructor(t){if(t.startsWith("?"))t=t.slice(1);for(let r of t.split("&")){if(!r)continue;let[s,e]=r.split("="),o=decodeURIComponent(s||""),i=decodeURIComponent(e||"");if(!this.params.has(o))this.params.set(o,[]);this.params.get(o).push(i)}}get(t){let r=this.params.get(t);return r?r[0]:null}getAll(t){return this.params.get(t)||[]}has(t){return this.params.has(t)}toString(){let t=[];for(let[r,s]of this.params.entries())for(let e of s)t.push(`${encodeURIComponent(r)}=${encodeURIComponent(e)}`);return t.join("&")}}n({URLSearchParams:v});class O{href;origin;protocol;hostname;port;pathname;search;hash;searchParams;constructor(t,r){let s=T(t,r),e=N(s);this.href=s,this.origin=e.origin,this.protocol=e.protocol,this.hostname=e.hostname,this.port=e.port,this.pathname=e.pathname,this.search=e.search,this.hash=e.hash,this.searchParams=new URLSearchParams(this.search)}toString(){return this.href}toJSON(){return this.href}}n({URL:O});function T(t,r){if(!r||/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t))return t;if(r.endsWith("/"))return r+t;else return r.replace(/\/[^/]*$/,"/")+t}function N(t){let r=/^(?<protocol>[a-z]+:)?\/\/(?<hostname>[^:/?#]+)?(?::(?<port>\d+))?(?<pathname>[^?#]*)?(?<search>\?[^#]*)?(?<hash>#.*)?$/i,e=t.match(r)?.groups||{},o=e.protocol||"",i=e.hostname||"",a=e.port||"",c=e.pathname||"/",f=e.search||"",d=e.hash||"",x=o&&i?`${o}//${i}${a?":"+a:""}`:"";return{protocol:o,hostname:i,port:a,pathname:c,search:f,hash:d,origin:x}}class h{static UNSENT=0;static OPENED=1;static HEADERS_RECEIVED=2;static LOADING=3;static DONE=4;readyState=h.UNSENT;status=0;statusText="";responseText="";responseType="";response=null;onreadystatechange=null;method="";url="";_async=!0;headers={};body=null;open(t,r,s=!0){this.method=t.toUpperCase(),this.url=r,this._async=s,this.readyState=h.OPENED,this._triggerReadyStateChange()}setRequestHeader(t,r){this.headers[t]=r}send(t=null){this.body=t;let r={method:this.method,headers:this.headers,body:t};A(this.url,r).then(async(s)=>{this.status=s.status,this.statusText=s.statusText,this.readyState=h.HEADERS_RECEIVED,this._triggerReadyStateChange(),this.readyState=h.LOADING,this._triggerReadyStateChange(),this.responseText=await s.text(),this.response=this.responseType==="json"?JSON.parse(this.responseText):this.responseText,this.readyState=h.DONE,this._triggerReadyStateChange()}).catch((s)=>{this.status=0,this.statusText=s.message,this.readyState=h.DONE,this._triggerReadyStateChange()})}abort(){this.status=0,this.statusText="abort",this.readyState=h.DONE,this._triggerReadyStateChange()}getAllResponseHeaders(){return""}getResponseHeader(t){return null}_triggerReadyStateChange(){if(typeof this.onreadystatechange==="function")try{this.onreadystatechange()}catch(t){console.error("Error in onreadystatechange:",t)}}}n({XMLHttpRequest:h});})();
''';
