const jsRuntimePolyfill = r'''// @bun
(()=>{function s(t){Object.assign(globalThis,t)}s({btoa:b,atob:R});function b(t){let e=Uint8Array.from(t,(r)=>r.charCodeAt(0)),n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return I(n)}function R(t){return U(t)}function I(t){let n="",r=0;while(r<t.length){let o=t.charCodeAt(r++)&255,i=t.charCodeAt(r++),a=t.charCodeAt(r++),c=o>>2,f=(o&3)<<4|i>>4,h=isNaN(i)?64:(i&15)<<2|a>>6,p=isNaN(a)?64:a&63;n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p)}return n}function U(t){let n="",r=0;t=t.replace(/[^A-Za-z0-9+/=]/g,"");while(r<t.length){let o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),f=o<<2|i>>4,h=(i&15)<<4|a>>2,p=(a&3)<<6|c;if(n+=String.fromCharCode(f),a!=64)n+=String.fromCharCode(h);if(c!=64)n+=String.fromCharCode(p)}return n}s({base64Encode:$,base64Decode:S});function $(t){let e=String.fromCharCode(...t);return b(e)}function S(t){let e=R(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var u=new Map;function C(t,e){let n=u.get(t);if(!n)n=new Set,u.set(t,n);n.add(e)}function E(t,e){u.get(t)?.delete(e)}function O(t,e){u.get(t)?.forEach((n)=>{try{n(e)}catch(r){console.error("Error in message listener for event:",t,r)}})}s({addEventListener:C,removeEventListener:E,__$$DART_SEND_MESSAGE$$__:O});if(!Array.prototype.at)Array.prototype.at=function(t){let e=this.length,n=Math.trunc(t)<0?e+t:t;return this[n]};if(!Array.prototype.findLast)Array.prototype.findLast=function(t){for(let e=this.length-1;e>=0;e--)if(t.call(this,this[e],e,this))return this[e];return};if(!Array.prototype.findLastIndex)Array.prototype.findLastIndex=function(t){for(let e=this.length-1;e>=0;e--)if(t.call(this,this[e],e,this))return e;return-1};if(!Array.prototype.toReversed)Array.prototype.toReversed=function(){return[...this].reverse()};if(!Array.prototype.toSorted)Array.prototype.toSorted=function(t){return[...this].sort(t)};if(!Array.prototype.toSpliced)Array.prototype.toSpliced=function(t,e,...n){let r=[...this];return r.splice(t,e,...n),r};if(!Array.prototype.with)Array.prototype.with=function(t,e){let n=[...this];return n[t]=e,n};if(!Set.prototype.union)Set.prototype.union=function(t){return new Set([...this,...t])};if(!Set.prototype.intersection)Set.prototype.intersection=function(t){return new Set([...this].filter((e)=>t.has(e)))};if(!Set.prototype.difference)Set.prototype.difference=function(t){return new Set([...this].filter((e)=>!t.has(e)))};if(!Set.prototype.symmetricDifference)Set.prototype.symmetricDifference=function(t){return new Set([...[...this].filter((e)=>!t.has(e)),...[...t].filter((e)=>!this.has(e))])};if(!Object.hasOwn)Object.hasOwn=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};if(!Promise.withResolvers)Promise.withResolvers=function(){let t,e;return{promise:new Promise((r,o)=>{t=r,e=o}),resolve:t,reject:e}};class g{map;constructor(t={}){if(this.map={},t instanceof g){t.forEach((e,n)=>{this.map[n.toLowerCase()]=e});return}else for(let e in t)this.map[e.toLowerCase()]=t[e]}get(t){return this.map[t.toLowerCase()]??null}has(t){return t.toLowerCase()in this.map}keys(){return Object.keys(this.map)}entries(){return Object.entries(this.map)}forEach(t){for(let[e,n]of this.entries())t(n,e,this)}}s({$Headers:g});class x{params=new Map;constructor(t){if(t.startsWith("?"))t=t.slice(1);for(let e of t.split("&")){if(!e)continue;let[n,r]=e.split("="),o=decodeURIComponent(n||""),i=decodeURIComponent(r||"");if(!this.params.has(o))this.params.set(o,[]);this.params.get(o).push(i)}}get(t){let e=this.params.get(t);return e?e[0]:null}getAll(t){return this.params.get(t)||[]}has(t){return this.params.has(t)}toString(){let t=[];for(let[e,n]of this.params.entries())for(let r of n)t.push(`${encodeURIComponent(e)}=${encodeURIComponent(r)}`);return t.join("&")}}s({URLSearchParams:x});class m{href;origin;protocol;hostname;port;pathname;search;hash;searchParams;constructor(t,e){let n=k(t,e),r=D(n);this.href=n,this.origin=r.origin,this.protocol=r.protocol,this.hostname=r.hostname,this.port=r.port,this.pathname=r.pathname,this.search=r.search,this.hash=r.hash,this.searchParams=new x(this.search)}toString(){return this.href}toJSON(){return this.href}}s({URL:m});function k(t,e){if(!e||/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t))return t;if(e.endsWith("/"))return e+t;else return e.replace(/\/[^/]*$/,"/")+t}function D(t){let e=/^(?<protocol>[a-z]+:)?\/\/(?<hostname>[^:/?#]+)?(?::(?<port>\d+))?(?<pathname>[^?#]*)?(?<search>\?[^#]*)?(?<hash>#.*)?$/i,r=t.match(e)?.groups||{},o=r.protocol||"",i=r.hostname||"",a=r.port||"",c=r.pathname||"/",f=r.search||"",h=r.hash||"",p=o&&i?`${o}//${i}${a?":"+a:""}`:"";return{protocol:o,hostname:i,port:a,pathname:c,search:f,hash:h,origin:p}}class l{url;method;headers;body;constructor(t,e={}){this.url=typeof t==="string"?t:t instanceof m?t.toString():t.url,this.method=(e.method||(typeof t.method==="string"?t.method:"GET")).toUpperCase(),this.headers=new g(e.headers||(typeof t!=="string"&&!(t instanceof m)?t.headers:{})),this.body=e.body??(typeof t!=="string"&&!(t instanceof m)?t.body:null)}clone(){return new l(this.url,{method:this.method,headers:this.headers,body:this.body})}}s({Request:l});class y{#t;status;statusText;headers;url;ok;constructor(t,e={}){this.#t=t,this.status=e.status??200,this.statusText=e.statusText??"",this.headers=new g(e.headers||{}),this.url=e.url??"",this.ok=this.status>=200&&this.status<300}async text(){return new TextDecoder().decode(await this.arrayBuffer())}async json(){return JSON.parse(await this.text())}async arrayBuffer(){let t=atob(this.#t),e=t.length,n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t.charCodeAt(r);return n.buffer}}s({Response:y});async function w(t,e){let n=t instanceof l?t:new l(t,e),r="fetch_"+Math.random().toString(36).slice(2),o="response:"+r;return new Promise((i,a)=>{let c=(f)=>{if(E(o,c),f.__fetch_error__)a(new Error(f?.__fetch_error__));else{let h=new y(f.__body,{status:f.status,statusText:f.statusText,headers:f.headers,url:f.url});i(h)}};C(o,c),sendMessage("dart_fetch_request",JSON.stringify({id:r,url:n.url,options:{method:n.method,headers:Object.fromEntries(n.headers.entries()),body:n.body}}))})}s({fetch:w});class A{constructor(t="utf-8"){if(t.toLowerCase()!=="utf-8")throw new Error("Only utf-8 TextDecoder is supported")}decode(t){if(!(t instanceof Uint8Array))t=new Uint8Array(t);let e="",n=0;while(n<t.length){let r=t[n++];if(r<128)e+=String.fromCharCode(r);else if(r>=192&&r<224){let o=t[n++];e+=String.fromCharCode((r&31)<<6|o&63)}else if(r>=224&&r<240){let o=t[n++],i=t[n++];e+=String.fromCharCode((r&15)<<12|(o&63)<<6|i&63)}else if(r>=240){let o=t[n++],i=t[n++],a=t[n++],c=(r&7)<<18|(o&63)<<12|(i&63)<<6|a&63;c-=65536,e+=String.fromCharCode(55296+(c>>10),56320+(c&1023))}}return e}}s({TextDecoder:A});class _{encode(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<128)e.push(r);else if(r<2048)e.push(192|r>>6),e.push(128|r&63);else if(r<55296||r>=57344)e.push(224|r>>12),e.push(128|r>>6&63),e.push(128|r&63);else{if(n++,n>=t.length)throw new Error("Invalid surrogate pair");let o=t.charCodeAt(n),i=(r-55296<<10)+(o-56320)+65536;e.push(240|i>>18),e.push(128|i>>12&63),e.push(128|i>>6&63),e.push(128|i&63)}}return new Uint8Array(e)}}s({TextEncoder:_});class T extends Error{constructor(t){super(t);this.name="UnimplementedError"}}s({UnimplementedError:T});class d{static UNSENT=0;static OPENED=1;static HEADERS_RECEIVED=2;static LOADING=3;static DONE=4;readyState=d.UNSENT;status=0;statusText="";responseText="";responseType="";response=null;onreadystatechange=null;method="";url="";_async=!0;headers={};body=null;open(t,e,n=!0){this.method=t.toUpperCase(),this.url=e,this._async=n,this.readyState=d.OPENED,this._triggerReadyStateChange()}setRequestHeader(t,e){this.headers[t]=e}send(t=null){this.body=t;let e={method:this.method,headers:this.headers,body:t};w(this.url,e).then(async(n)=>{this.status=n.status,this.statusText=n.statusText,this.readyState=d.HEADERS_RECEIVED,this._triggerReadyStateChange(),this.readyState=d.LOADING,this._triggerReadyStateChange(),this.responseText=await n.text(),this.response=this.responseType==="json"?JSON.parse(this.responseText):this.responseText,this.readyState=d.DONE,this._triggerReadyStateChange()}).catch((n)=>{this.status=0,this.statusText=n.message,this.readyState=d.DONE,this._triggerReadyStateChange()})}abort(){this.status=0,this.statusText="abort",this.readyState=d.DONE,this._triggerReadyStateChange()}getAllResponseHeaders(){return""}getResponseHeader(t){return null}_triggerReadyStateChange(){if(typeof this.onreadystatechange==="function")try{this.onreadystatechange()}catch(t){console.error("Error in onreadystatechange:",t)}}}s({XMLHttpRequest:d});})();
''';
