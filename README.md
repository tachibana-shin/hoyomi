## üì± Hoyomi ‚Äî Your Ultimate Anime & Manga Companion
<p align="center">
 <img width=200px height=200px src="https://github.com/user-attachments/assets/93daccd8-7ad3-408e-b184-178738219430"/>
</p>

<h1 align="center"> Hoyomi </h1>

**Hoyomi** is a modern, open-source app to **watch anime** and **read manga** in one seamless experience. Designed to be **lightweight**, **fast**, and **fully cross-platform**, Hoyomi runs smoothly on Android, iOS, Linux, macOS, Windows, and even on the web.

> [!WARNING]
> App is development

Multiple service support. Please check this:

- [lib/core_services/comic/services](lib/core_services/comic/services) - Service for comic, manga...
- [lib/core_services/eiga/services](lib/core_services/eiga/services) - Service for eiga, film...

3rd party services are now supported with the power of `typescript`. Check out the example here [hoyomi_bridge_ts/example](./hoyomi_bridge_ts/example) or [hoyomi-plugin-animehay](https://github.com/tachibana-shin/hoyomi-plugin-animhay)

---

### ‚ú® Features

- üé• **Stream anime** with subtitle support (custom fonts, colors, styles)
- üìö **Read manga** from multiple sources in a clean, scrollable reader
- üåê **Multi-platform**: Mobile, desktop & web support out of the box
- üé® **Highly customizable UI**: Dark/light themes, font settings, subtitle styles
- üí¨ **Offline support**: Cache and view anime/manga offline `(development)`
- üß© **Plugin-friendly**: Extend functionality with community-built integrations
- üîê **Privacy first**: No tracking, no ads, no data collection

---

### üçÉ Download
Get the app from our [releases page](https://github.com/tachibana-shin/hoyomi/releases).

### iOS Sideloading Sources
<a href="https://intradeus.github.io/http-protocol-redirector?r=altstore://install?url=https://github.com/tachibana-shin/hoyomi/releases/latest/download/app-iphoneos-release-unsigned.ipa">
  <img src="https://github.com/user-attachments/assets/90cde9d0-2ebe-49de-9366-2fa3fc293df9" width="150" />
</a> <!-- alt -->
&nbsp;
<a href="https://intradeus.github.io/http-protocol-redirector?r=feather://install/https://github.com/tachibana-shin/hoyomi/releases/latest/download/app-iphoneos-release-unsigned.ipa">
  <img src="https://github.com/user-attachments/assets/4539a50c-efe3-4ada-844a-f2fece1033b1" width="150" />
</a> <!-- feather -->
&nbsp;
<a href="https://intradeus.github.io/http-protocol-redirector?r=sidestore://install?url=https://github.com/tachibana-shin/hoyomi/releases/latest/download/app-iphoneos-release-unsigned.ipa">
  <img src="https://github.com/user-attachments/assets/7f78ef63-7814-40ac-a2e6-c47405b61bdf" width="150" />
</a> <!-- sidestore -->
&nbsp;
<a href="https://intradeus.github.io/http-protocol-redirector?r=apple-magnifier://install?url=https://github.com/tachibana-shin/hoyomi/releases/latest/download/app-iphoneos-release-unsigned.ipa">
  <img src="https://github.com/user-attachments/assets/fc298252-8bf8-4290-8541-aebb990cb0e0" width="150" />
</a> <!-- troll store -->
&nbsp;
<a href="https://github.com/tachibana-shin/hoyomi/releases/latest/download/app-iphoneos-release-unsigned.ipa">
  <img src="https://github.com/user-attachments/assets/126b9a18-2baf-4b7d-bc9c-411e104b5dd1" width="150" />
</a> <!-- direct url -->
&nbsp;

If your device runs `iOS 14.0 beta 2 ‚Äì 16.6.1, 16.7 RC (20H18)`, or `17.0`, you‚Äôre eligible to be a first-class citizen of [TrollStore](https://github.com/opa334/TrollStore) üöÄ.
Install it for free, then enjoy Hoyomi with permanent installation ‚Äî no resigning, no revokes, forever free.


---

### üõ°Ô∏è Open Source & Community Driven

Hoyomi is fully open-source, actively maintained by the community. We welcome contributions and ideas. You‚Äôre not just a user ‚Äî you‚Äôre part of the project.

- GitHub: [https://github.com/tachibana-shin/hoyomi](https://github.com/tachibana-shin/hoyomi)

---

### üì¶ Available On

- ‚úÖ Android
- ‚úÖ iOS
- ‚úÖ Windows (.exe)
- ‚úÖ Linux (.deb, .AppImage)
- ‚úÖ macOS (.dmg)
- ‚úÖ Web (PWA)

---

### üìù Privacy & EULA

Hoyomi does **not collect**, **store**, or **share** your personal data. Your activity stays on your device. See our full [Privacy Policy](https://github.com/tachibana-shin/hoyomi/blob/main/privacy-policy.md) and [EULA](https://github.com/tachibana-shin/hoyomi/blob/main/EULA.md) for details.

---

### ‚ù§Ô∏è Built with Flutter. Made with love in Japan-inspired spirit.

## Screenshot preview
<img src="https://github.com/user-attachments/assets/bc0df2fb-91d7-4a49-bfcc-23c576fc9c61" width="120px">
<img src="https://github.com/user-attachments/assets/31e19481-b8c2-423c-be62-1e7322605c50" width="120px">
<img src="https://github.com/user-attachments/assets/3a91eac8-fa1f-403e-b3af-1ba2a83b4ff5" width="120px">
<img src="https://github.com/user-attachments/assets/f2c8a6f5-b510-4376-920e-cab94a921ad6" width="120px">
<img src="https://github.com/user-attachments/assets/c49ce47d-bd98-438b-b166-7680606ee400" width="120px">
<img src="https://github.com/user-attachments/assets/9a8e5175-b07f-4c7a-8624-ac1c6bf1237b" width="120px">
<img src="https://github.com/user-attachments/assets/f9af1188-c57f-4131-a60f-e66c0e3d25e1" width="120px">
<img src="https://github.com/user-attachments/assets/b3f0162f-1c20-4d1f-95c1-e7998cdeb89a" width="120px">
<img src="https://github.com/user-attachments/assets/3c281173-e317-4d4d-98c6-8b18b8a6b438" width="120px">
<img src="https://github.com/user-attachments/assets/0e62df4b-984d-4b27-a22c-ca98a37cedee" width="120px">
<img src="https://github.com/user-attachments/assets/d38e708b-d2f9-4379-a9cd-8de985100f7a" width="120px">
<img src="https://github.com/user-attachments/assets/00c394f7-13ae-4bdb-9119-21e0d78770b7" width="120px">
<img src="https://github.com/user-attachments/assets/d0b7c834-797f-41c1-b253-8cfe753429eb" width="120px">
<img src="https://github.com/user-attachments/assets/0fc95982-e8c8-4dd2-8c58-9c5069152075" width="120px">


## Support platform
- [x] Android
- [x] Isar for android SDK <= 23
- [x] iOS side via TrollStore
- [x] iOS side by other methods

#### Creating New Plugins

Hoyomi's architecture allows for easy extension through custom plugins written in TypeScript. You can create new comic or eiga services by following these general steps:

1.  **Define your service interface**: Create a TypeScript file that defines the methods and data structures for your comic or eiga service, adhering to the `hoyomi_bridge_ts` conventions.
2.  **Implement the service logic**: Write the actual logic for fetching data, parsing content, and handling interactions within your TypeScript service.
3.  **Register your plugin**: Use the `hoyomi_bridge_ts` to register your implemented service, making it available to the Hoyomi application.

Refer to the existing examples for detailed implementation patterns:
-   [hoyomi_bridge_ts/example](./hoyomi_bridge_ts/example)
-   [hoyomi-plugin-animehay](https://github.com/tachibana-shin/hoyomi-plugin-animhay)

Here's a simplified example of an Eiga plugin:

```typescript
// example_eiga_plugin.ts
import {
  ABEigaService,
  createOImage,
  registerPlugin,
  StatusEnum,
  type EigaCategory,
  type EigaEpisode,
  type EigaEpisodes,
  type EigaHome,
  type MetaEiga,
  type ServerSource,
  type ServiceInit,
  type SourceVideo
} from "hoyomi_bridge_ts";

class MyCustomEigaService extends ABEigaService {
  override init: ServiceInit = {
    name: "My Custom Eiga",
    faviconUrl: createOImage("https://example.com/favicon.ico"),
    rootUrl: "https://example.com"
  };

  async getURL(eigaId: string, chapterId?: string): Promise<string> {
    // Logic to get the URL for a specific eiga or episode
    return `https://example.com/eiga/${eigaId}`;
  }

  async home(): Promise<EigaHome> {
    // Logic to fetch home page data (categories, popular eiga, etc.)
    return {
      categories: [
        {
          name: "Popular Eiga",
          items: [
            {
              name: "Example Eiga 1",
              eigaId: "example-1",
              image: createOImage("https://example.com/image1.jpg")
            }
          ]
        }
      ]
    };
  }

  async getCategory(params: {
    categoryId: string;
    page: number;
    filters: { [key: string]: string[] | null };
  }): Promise<EigaCategory> {
    // Logic to fetch eiga within a specific category
    return {
      name: "Category Name",
      url: "",
      items: [],
      page: params.page,
      totalItems: 0,
      totalPages: 0
    };
  }

  async getDetails(eigaId: string): Promise<MetaEiga> {
    // Logic to fetch detailed information about an eiga
    return {
      name: "Example Eiga Details",
      image: createOImage("https://example.com/details.jpg"),
      status: StatusEnum.Ongoing,
      genres: ["Action", "Adventure"],
      description: "A brief description of the eiga.",
      seasons: []
    };
  }

  async getEpisodes(eigaId: string): Promise<EigaEpisodes> {
    // Logic to fetch episodes for an eiga
    return {
      episodes: [
        {
          name: "Episode 1",
          episodeId: "ep-1"
        }
      ]
    };
  }

  async getSource(params: {
    eigaId: string;
    episode: EigaEpisode;
    server?: ServerSource;
  }): Promise<SourceVideo> {
    // Logic to get video source for an episode
    return {
      src: "https://example.com/video.mp4",
      url: "https://example.com/video.mp4",
      type: "video/mp4"
    };
  }

  async search(params: {
    keyword: string;
    page: number;
    filters: { [key: string]: string[] | null };
    quick: boolean;
  }): Promise<EigaCategory> {
    // Logic to search for eiga
    return {
      name: `Search results for "${params.keyword}"`,
      url: "",
      items: [],
      page: params.page,
      totalItems: 0,
      totalPages: 0
    };
  }
}

registerPlugin(MyCustomEigaService);
```

Here's a simplified example of a Comic plugin:

```typescript
// example_comic_plugin.ts
import {
  ABComicService,
  ComicModes,
  createOImage,
  registerPlugin,
  StatusEnum,
  type ComicCategory,
  type ComicHome,
  type MetaComic,
  type OImage,
  type ServiceInit
} from "hoyomi_bridge_ts";

class MyCustomComicService extends ABComicService {
  override init: ServiceInit = {
    name: "My Custom Comic",
    faviconUrl: createOImage("https://example.com/comic-favicon.ico"),
    rootUrl: "https://example.com/comic"
  };

  async getURL(comicId: string, chapterId?: string): Promise<string> {
    // Logic to get the URL for a specific comic or chapter
    return `https://example.com/comic/${comicId}`;
  }

  async home(): Promise<ComicHome> {
    // Logic to fetch home page data (categories, popular comics, etc.)
    return {
      categories: [
        {
          name: "Popular Comics",
          items: [
            {
              name: "Example Comic 1",
              comicId: "comic-1",
              image: createOImage("https://example.com/comic1.jpg")
            }
          ]
        }
      ]
    };
  }

  async getCategory(params: {
    categoryId: string;
    page: number;
    filters: { [key: string]: string[] | null };
  }): Promise<ComicCategory> {
    // Logic to fetch comics within a specific category
    return {
      name: "Comic Category Name",
      url: "",
      items: [],
      page: params.page,
      totalItems: 0,
      totalPages: 0
    };
  }

  async getDetails(comicId: string): Promise<MetaComic> {
    // Logic to fetch detailed information about a comic
    return {
      name: "Example Comic Details",
      image: createOImage("https://example.com/comic-details.jpg"),
      status: StatusEnum.Ongoing,
      genres: ["Fantasy", "Adventure"],
      description: "A brief description of the comic.",
      chapters: [
        {
          name: "Chapter 1",
          chapterId: "ch-1",
          time: new Date(),
          order: 1,
        }
      ],
      lastModified: new Date()
    };
  }

  async getPages(comicId: string, chapterId: string): Promise<OImage[]> {
    // Logic to get image pages for a specific chapter
    return [
      createOImage("https://example.com/comic/page1.jpg"),
      createOImage("https://example.com/comic/page2.jpg"),
    ];
  }

  async search(params: {
    keyword: string;
    page: number;
    filters: { [key: string]: string[] | null };
    quick: boolean;
  }): Promise<ComicCategory> {
    // Logic to search for comics
    return {
      name: `Search results for "${params.keyword}"`,
      url: "",
      items: [],
      page: params.page,
      totalItems: 0,
      totalPages: 0
    };
  }

  getComicModes(comic: MetaComic): ComicModes {
    // Define how the comic should be read (e.g., leftToRight, rightToLeft, webtoon)
    return ComicModes.leftToRight;
  }
}

registerPlugin(MyCustomComicService);
```

## Todo
- [ ] Add background image for `details_comic`
- [ ] Add information `book` for reader
- [ ] Fix logic fake page

- [ ] Page eiga details

- [ ] Fix zoomer read manga

- [ ] Responsive for video player
- [ ] AppBar all page

- [ ] API comment for eiga
- [ ] API follow anime
- [ ] API notification

- [ ] A11y manga reader
- [ ] API playlist
- [ ] API playlist online

- [ ] Search icon for all section
- [ ] Bottom sheet show all options

- [ ] Add multiple server in eiga
<!-- provider or mobx -->

## Development

### Prerequisites
#### Step 1: Set up the Firebase project
The first step is to set up the Firebase project and enable Google sign-in. if you already have a flutter project, you can skip this step.

1. Go to the [Firebase console](https://console.firebase.google.com/) and create a new project.
2. Click on the `Authentication` link in the left-hand menu, then click on the `Sign-in Method` tab.
3. Enable the `Google` sign-in method.


#### Step 2: Configure the OAuth client
You need your application's client ID and Secret from Google Cloud Console to enable Google sign-in. If you‚Äôve it already then skip this step.

- To get the client ID and secret, follow the steps from the given [link](https://support.google.com/cloud/answer/6158849?hl=en).
- Choose `a web application`.
- In the `Authorized redirect URIs` and `Authorized JavaScript origin`, enter the URL `http://localhost`

-----
### Setup Serverless
To deploy the serverless application, you need to set up a serverless provider. Here are the steps to set up Deno:

#### Step 1: Configure the Firebase Admin
Please goto `Project Settings`
![image](https://github.com/user-attachments/assets/620edb61-7ce8-43f4-ab6b-01de9b558d01)

1. Click to `Generate new private key`
2. Paste file download to `serverless/service-account-key.json`

#### Step 2: Configre the Postgres database
The server required database for working
1. Run `cd serverless`
3. Add `DATABASE_URL` from `setting project` to `.env`

-----
### Setup Application

#### Step 1 (Required in mobile platform)
> [!TIP]
>
> This project depends Firebase. Please first run
> ```bash
> flutterfire configure
> ```
> 
> and configuring file `/android/app/google-services.json`, `/ios/Runner/GoogleService-Info.plist` (two file auto create by `flutterfire`)

- `/android/app/google-services.json` required for Android
- `/ios/Runner/GoogleService-Info.plist` required for iOS

> [!TIP]
> 
> **NOTE** (If you development for iOS)
>
> Please edit `CFBundleURLSchemes` in `ios/Runner/Info.plist`

#### Step 2 (Required in desktop platform)
Goto https://console.cloud.google.com/apis/credentials and get `Client ID` and `Client secret` from `OAuth 2.0 Client IDs` (Use `Web application`)

Set to `.env`
```env
GOOGLE_CLIENT_ID=<Client ID>
GOOGLE_CLIENT_SECRET=<Client secret>
```
#### Step 3
Set to `.env`
```env
BASE_API_GENERAL=<URL base API general serverless>
```

### GitHub Actions

To release the application, the following `secrets` must be provided:
### General
- `ENV_CONTENT` - Content of the `.env` file. (not encode base64)

### **For Android**
- `KEYSTORE_CONTENT` - Base64-encoded content of the `keystore.jks` file.
- `KEYSTORE_PASSWORD` - Password used to sign the `keystore.jks` file.
- `KEYSTORE_ALIAS` - Alias used to sign the `keystore.jks` file.
- `GOOGLE_SERVICES_JSON` - Base64-encoded content of the `google-services.json` file (automatically generated by `flutterfire`).

### **For iOS**
- `GOOGLE_SERVICE_INFO_PLIST` - Base64-encoded content of the `GoogleService-Info.plist` file (automatically generated by `flutterfire`).

> **Note**: The `google-services.json` (for Android) and `GoogleService-Info.plist` (for iOS) files are automatically created when you run the `flutterfire configure` command during Firebase setup.

